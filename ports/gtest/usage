The package gtest is compatible with built-in CMake targets:

    enable_testing()
    find_package(GTest REQUIRED)
    target_link_libraries(main PRIVATE GTest::gtest_main) # or GTest::gmock_main
    add_test(AllTestsInMain main)
